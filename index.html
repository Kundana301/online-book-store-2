<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter & Verse | Premium Bookstore</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --amazon-blue: #232f3e;
            --amazon-light: #37475a;
            --amazon-orange: #febd69;
            --amazon-accent: #e67e22;
            --bg-gray: #eaeded;
            --success: #27ae60;
        }

        body { font-family: 'Segoe UI', Arial, sans-serif; margin: 0; background-color: var(--bg-gray); color: #111; line-height: 1.4; overflow-x: hidden; }

        /* HEADER & NAVIGATION */
        header { background-color: var(--amazon-blue); color: white; padding: 10px 2%; position: sticky; top: 0; z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.2); }
        .nav-top { display: flex; align-items: center; justify-content: space-between; gap: 20px; }
        .logo { font-size: 1.4rem; font-weight: bold; color: white; text-decoration: none; cursor: pointer; white-space: nowrap; }
        .logo span { color: var(--amazon-orange); }

        .search-container { flex-grow: 1; display: flex; max-width: 800px; }
        .search-container input { width: 100%; padding: 10px; border: none; border-radius: 4px 0 0 4px; outline: none; }
        .search-container button { background: var(--amazon-orange); border: none; padding: 0 15px; border-radius: 0 4px 4px 0; cursor: pointer; font-size: 1.1rem; }

        .nav-tools { display: flex; align-items: center; gap: 20px; }
        .nav-link { color: white; text-decoration: none; font-size: 0.8rem; cursor: pointer; }
        .nav-link b { display: block; font-size: 0.9rem; }
        .cart-icon { position: relative; font-size: 1.8rem; display: flex; align-items: center; }
        #cart-count { position: absolute; top: -5px; right: -10px; background: var(--amazon-accent); color: white; border-radius: 50%; padding: 2px 6px; font-size: 0.7rem; font-weight: bold; }

        .sub-nav { background-color: var(--amazon-light); color: white; padding: 8px 2%; display: flex; gap: 15px; font-size: 0.9rem; overflow-x: auto; }
        .sub-nav span { cursor: pointer; white-space: nowrap; padding: 2px 5px; transition: 0.2s; }
        .sub-nav span:hover { background: rgba(255,255,255,0.1); border-radius: 3px; }

        /* PAGE LAYOUT */
        .page { display: none; padding: 20px 2%; max-width: 1300px; margin: 0 auto; min-height: 80vh; animation: fadeIn 0.3s ease; }
        .active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* BOOK GRID */
        .book-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px; margin-top: 20px; }
        .book-card { background: white; padding: 15px; border-radius: 4px; display: flex; flex-direction: column; transition: 0.2s; border: 1px solid #eee; }
        .book-card:hover { box-shadow: 0 4px 12px rgba(0,0,0,0.15); transform: translateY(-2px); }
        .book-card img { width: 100%; height: 220px; object-fit: contain; cursor: pointer; }
        .book-title { font-weight: 500; color: #007185; cursor: pointer; margin-top: 10px; height: 40px; overflow: hidden; }
        .book-title:hover { color: #c45500; text-decoration: underline; }
        .rating { color: #ffa41c; font-size: 0.8rem; margin: 5px 0; }
        .price { font-size: 1.2rem; font-weight: bold; }
        .add-btn { background: #ffd814; border: 1px solid #fcd200; border-radius: 20px; padding: 8px; cursor: pointer; width: 100%; margin-top: auto; font-weight: 500; }
        .add-btn:hover { background: #f7ca00; }

        /* FORMS (LOGIN/REGISTER) */
        .auth-container { background: white; max-width: 350px; margin: 40px auto; padding: 30px; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .auth-container h2 { margin-top: 0; font-weight: 500; }
        .auth-container input { width: 100%; padding: 10px; margin: 8px 0 15px 0; border: 1px solid #888; border-radius: 3px; box-sizing: border-box; }
        .auth-container label { font-size: 0.9rem; font-weight: bold; }
        .auth-container p { font-size: 0.8rem; color: #555; }
        .auth-container .switch-btn { color: #007185; cursor: pointer; text-decoration: none; }
        .auth-container .switch-btn:hover { text-decoration: underline; }

        /* CART PAGE */
        .cart-layout { display: grid; grid-template-columns: 1fr 300px; gap: 20px; }
        .cart-list { background: white; padding: 20px; min-height: 400px; }
        .cart-item { display: flex; gap: 20px; padding: 15px 0; border-bottom: 1px solid #ddd; }
        .cart-item img { width: 100px; height: 140px; object-fit: contain; }
        .item-details h3 { margin: 0 0 5px 0; font-size: 1.1rem; }
        .qty-select { padding: 3px; border-radius: 4px; background: #f0f2f2; border: 1px solid #d5d9d9; }
        .delete-link { color: #007185; font-size: 0.8rem; cursor: pointer; margin-left: 15px; border: none; background: none; }
        .delete-link:hover { text-decoration: underline; color: #c45500; }

        /* TOAST NOTIFICATION */
        #toast { position: fixed; bottom: 20px; right: 20px; background: #333; color: white; padding: 12px 25px; border-radius: 4px; display: none; z-index: 2000; animation: slideUp 0.3s ease; }
        @keyframes slideUp { from { transform: translateY(100px); } to { transform: translateY(0); } }

        footer { background: var(--amazon-blue); color: white; text-align: center; padding: 40px; margin-top: 50px; }
    </style>
</head>
<body>

<div id="toast">Item added to cart!</div>

<header>
    <div class="nav-top">
        <div class="logo" onclick="showPage('home')">Chapter<span>&Verse</span></div>
        <div class="search-container">
            <input type="text" id="searchInput" placeholder="Search for books, authors..." onkeyup="if(event.key==='Enter') runSearch()">
            <button onclick="runSearch()"><i class="fa fa-search"></i></button>
        </div>
        <div class="nav-tools">
            <div class="nav-link" onclick="showPage('login')">Hello, <span id="user-display">Sign in</span><b>Account</b></div>
            <div class="nav-link cart-icon" onclick="showPage('cart')">
                <i class="fa fa-shopping-cart"></i>
                <span id="cart-count">0</span>
            </div>
        </div>
    </div>
</header>

<div class="sub-nav">
    <span onclick="filterCategory('All')"><b><i class="fa fa-bars"></i> All</b></span>
    <span onclick="filterCategory('Fiction')">Fiction</span>
    <span onclick="filterCategory('Sci-Fi')">Sci-Fi</span>
    <span onclick="filterCategory('Non-Fiction')">Self-Help</span>
    <span onclick="filterCategory('History')">History</span>
    <span onclick="filterCategory('Tech')">Technology</span>
</div>

<div id="home" class="page active">
    <div style="background: white; padding: 15px; border-radius: 4px; margin-bottom: 20px;">
        <h2 id="gallery-title" style="margin:0;">Recommended for you</h2>
    </div>
    <div class="book-grid" id="book-display"></div>
</div>

<div id="login" class="page">
    <div class="auth-container">
        <h2>Sign-In</h2>
        <label>Email</label>
        <input type="email" id="loginEmail" placeholder="Enter your email">
        <label>Password</label>
        <input type="password" placeholder="At least 6 characters">
        <button class="add-btn" onclick="handleAuth('login')">Sign In</button>
        <p>New to Chapter & Verse? <span class="switch-btn" onclick="showPage('register')">Create an account</span></p>
    </div>
</div>

<div id="register" class="page">
    <div class="auth-container">
        <h2>Create Account</h2>
        <label>Your Name</label>
        <input type="text" id="regName" placeholder="First and last name">
        <label>Email</label>
        <input type="email" placeholder="Email address">
        <label>Password</label>
        <input type="password" placeholder="At least 6 characters">
        <button class="add-btn" onclick="handleAuth('register')" style="background: #e7e9ec; border-color: #adb1b8;">Create Account</button>
        <hr>
        <p>Already have an account? <span class="switch-btn" onclick="showPage('login')">Sign in</span></p>
    </div>
</div>

<div id="cart" class="page">
    <div class="cart-layout">
        <div class="cart-list">
            <h2>Shopping Cart</h2>
            <hr>
            <div id="cart-items-container"></div>
        </div>
        <div class="summary-box" style="background: white; padding: 20px; border-radius: 4px;">
            <h3>Subtotal (<span id="sub-qty">0</span> items): <br><span id="sub-total">$0.00</span></h3>
            <button class="add-btn" onclick="processCheckout()">Proceed to Buy</button>
        </div>
    </div>
</div>

<div id="product-detail" class="page">
    <button class="delete-link" onclick="showPage('home')" style="font-size: 1rem; margin-bottom: 10px;"><i class="fa fa-arrow-left"></i> Back to search</button>
    <div style="background:white; padding:30px; border-radius:8px; display: flex; gap:30px;">
        <img id="detail-img" src="" style="width:300px; height:450px; object-fit: contain;">
        <div style="flex:1">
            <h1 id="detail-title" style="margin:0"></h1>
            <div id="detail-rating" class="rating"></div>
            <hr>
            <div class="price" id="detail-price" style="color:#B12704; font-size: 1.8rem;"></div>
            <p id="detail-desc" style="margin:20px 0; color:#333"></p>
            <button class="add-btn" id="detail-add-btn" style="width:200px">Add to Cart</button>
        </div>
    </div>
</div>

<footer>
    <p>© 2024 Chapter & Verse Bookstore | Secure Payment Gateway Simulated</p>
</footer>

<script>
    const books = [
        { id: 1, title: "The Silent Forest", author: "Sarah J. Maas", price: 15.99, category: "Fiction", rating: 4.5, img: "https://images.unsplash.com/photo-1544947950-fa07a98d237f?w=400", desc: "A hauntingly beautiful tale about a forest that swallowed a village whole, and the girl who dared to walk back in." },
        { id: 2, title: "Quantum Echoes", author: "Isaac Asimov", price: 12.50, category: "Sci-Fi", rating: 4.8, img: "https://images.unsplash.com/photo-1512820790803-83ca734da794?w=400", desc: "Space travel is common, but time travel is forbidden. Follow a scientist who discovers echoes of the future." },
        { id: 3, title: "Ancient Paths", author: "H.G. Wells", price: 18.00, category: "History", rating: 4.2, img: "https://images.unsplash.com/photo-1543003923-99926422040b?w=400", desc: "A deep dive into the lost civilizations of Mesopotamia and the technology they used to build empires." },
        { id: 4, title: "Midnight Sun", author: "Stephenie Meyer", price: 22.00, category: "Fiction", rating: 4.0, img: "https://images.unsplash.com/photo-1589829085413-56de8ae18c73?w=400", desc: "A retelling of the classic romance from a darker, more introspective perspective." },
        { id: 5, title: "The Tech Revolution", author: "Elon Musk", price: 29.99, category: "Tech", rating: 4.9, img: "https://images.unsplash.com/photo-1519389950473-47ba0277781c?w=400", desc: "Insights into the future of AI, space exploration, and sustainable energy." },
        { id: 6, title: "Deep Focus", author: "Cal Newport", price: 14.20, category: "Non-Fiction", rating: 4.7, img: "https://images.unsplash.com/photo-1497633762265-9d179a990aa6?w=400", desc: "How to master the art of concentration in a world designed to distract you." }
    ];

    let cart = [];
    let currentUser = null;

    // 1. NAVIGATION
    function showPage(id) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        window.scrollTo(0,0);
    }

    // 2. AUTHENTICATION
    function handleAuth(type) {
        if(type === 'register') {
            const name = document.getElementById('regName').value;
            if(!name) return alert("Please enter your name");
            currentUser = name;
        } else {
            const email = document.getElementById('loginEmail').value;
            currentUser = email.split('@')[0] || "User";
        }
        document.getElementById('user-display').innerText = currentUser;
        showToast(`Welcome, ${currentUser}!`);
        showPage('home');
    }

    // 3. BOOK RENDERING
    function displayBooks(list) {
        const container = document.getElementById('book-display');
        container.innerHTML = list.map(book => `
            <div class="book-card">
                <img src="${book.img}" onclick="openProduct(${book.id})">
                <div class="book-title" onclick="openProduct(${book.id})">${book.title}</div>
                <div class="rating">${'⭐'.repeat(Math.floor(book.rating))} ${book.rating}</div>
                <div class="price">$${book.price.toFixed(2)}</div>
                <button class="add-btn" onclick="addToCart(${book.id})">Add to Cart</button>
            </div>
        `).join('');
    }

    function openProduct(id) {
        const book = books.find(b => b.id === id);
        document.getElementById('detail-title').innerText = book.title;
        document.getElementById('detail-img').src = book.img;
        document.getElementById('detail-price').innerText = `$${book.price.toFixed(2)}`;
        document.getElementById('detail-desc').innerText = book.desc;
        document.getElementById('detail-rating').innerHTML = '⭐'.repeat(Math.floor(book.rating));
        document.getElementById('detail-add-btn').onclick = () => addToCart(id);
        showPage('product-detail');
    }

    // 4. CART SYSTEM
    function addToCart(id) {
        const book = books.find(b => b.id === id);
        cart.push({...book, cartId: Date.now()}); // Unique ID for removal
        updateCartUI();
        showToast("Added to Cart");
    }

    function removeItem(cartId) {
        cart = cart.filter(item => item.cartId !== cartId);
        updateCartUI();
        showToast("Item removed from cart");
    }

    function updateCartUI() {
        const count = cart.length;
        document.getElementById('cart-count').innerText = count;
        document.getElementById('sub-qty').innerText = count;
        
        const container = document.getElementById('cart-items-container');
        let total = 0;
        
        if(count === 0) {
            container.innerHTML = "<div style='text-align:center; padding:40px;'><i class='fa fa-shopping-cart' style='font-size:4rem; color:#ddd;'></i><p>Your cart is empty.</p></div>";
        } else {
            container.innerHTML = cart.map(item => {
                total += item.price;
                return `
                    <div class="cart-item">
                        <img src="${item.img}">
                        <div class="item-details" style="flex:1">
                            <h3>${item.title}</h3>
                            <p style="color:green; font-size:0.8rem;">In Stock</p>
                            <span style="font-size:0.9rem;">Qty: 1</span>
                            <button class="delete-link" onclick="removeItem(${item.cartId})">Delete</button>
                        </div>
                        <div class="price">$${item.price.toFixed(2)}</div>
                    </div>
                `;
            }).join('');
        }
        document.getElementById('sub-total').innerText = `$${total.toFixed(2)}`;
    }

    // 5. UTILS
    function showToast(msg) {
        const toast = document.getElementById('toast');
        toast.innerText = msg;
        toast.style.display = 'block';
        setTimeout(() => toast.style.display = 'none', 2500);
    }

    function runSearch() {
        const q = document.getElementById('searchInput').value.toLowerCase();
        const filtered = books.filter(b => b.title.toLowerCase().includes(q) || b.category.toLowerCase().includes(q));
        document.getElementById('gallery-title').innerText = `Search results for "${q}"`;
        displayBooks(filtered);
        showPage('home');
    }

    function filterCategory(cat) {
        const filtered = cat === 'All' ? books : books.filter(b => b.category === cat);
        document.getElementById('gallery-title').innerText = cat === 'All' ? "Recommended for you" : `${cat} Books`;
        displayBooks(filtered);
        showPage('home');
    }

    function processCheckout() {
        if(!currentUser) {
            alert("Please sign in to proceed with checkout.");
            showPage('login');
            return;
        }
        if(cart.length === 0) return alert("Your cart is empty!");
        
        alert(`Thank you, ${currentUser}! Order total $${document.getElementById('sub-total').innerText} placed successfully.`);
        cart = [];
        updateCartUI();
        showPage('home');
    }

    // Init
    displayBooks(books);
</script>

</body>
</html>
