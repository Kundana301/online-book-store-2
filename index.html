<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter & Verse | Amazon Style</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --amazon-blue: #232f3e;
            --amazon-light: #37475a;
            --amazon-orange: #febd69;
            --amazon-accent: #e67e22;
            --bg-gray: #eaeded;
        }

        body { font-family: 'Segoe UI', Arial, sans-serif; margin: 0; background-color: var(--bg-gray); color: #111; }

        /* HEADER */
        header { background-color: var(--amazon-blue); color: white; padding: 10px 2%; position: sticky; top: 0; z-index: 1000; }
        .nav-top { display: flex; align-items: center; justify-content: space-between; gap: 20px; }
        .logo { font-size: 1.4rem; font-weight: bold; color: white; cursor: pointer; }
        .logo span { color: var(--amazon-orange); }

        .search-container { flex-grow: 1; display: flex; max-width: 700px; }
        .search-container input { width: 100%; padding: 10px; border: none; border-radius: 4px 0 0 4px; outline: none; }
        .search-container button { background: var(--amazon-orange); border: none; padding: 0 15px; border-radius: 0 4px 4px 0; cursor: pointer; }

        .nav-tools { display: flex; align-items: center; gap: 20px; }
        .nav-link { color: white; text-decoration: none; font-size: 0.8rem; cursor: pointer; }
        .nav-link b { display: block; font-size: 0.9rem; }
        
        .cart-icon { position: relative; font-size: 1.8rem; }
        #cart-count { position: absolute; top: -5px; right: -10px; background: var(--amazon-accent); color: white; border-radius: 50%; padding: 2px 6px; font-size: 0.7rem; }

        /* COMMON STYLES */
        .page { display: none; padding: 20px 2%; max-width: 1200px; margin: 0 auto; min-height: 80vh; }
        .active { display: block; }
        .card-white { background: white; padding: 20px; border-radius: 8px; border: 1px solid #ddd; margin-bottom: 20px; }
        .btn-amazon { background: #ffd814; border: 1px solid #fcd200; border-radius: 8px; padding: 10px; cursor: pointer; width: 100%; font-weight: bold; }
        .btn-amazon:hover { background: #f7ca00; }
        
        /* GRID */
        .book-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px; }
        .book-card { background: white; padding: 15px; border: 1px solid #ddd; }
        .book-card img { width: 100%; height: 200px; object-fit: contain; cursor: pointer; }
        
        /* CHECKOUT STEPS */
        .checkout-step { border-bottom: 1px solid #ddd; padding: 20px 0; }
        .checkout-step h2 { margin: 0; color: #c45500; font-size: 1.2rem; }
        input[type="text"], input[type="password"] { width: 100%; padding: 8px; margin: 10px 0; border: 1px solid #a6a6a6; border-radius: 3px; box-sizing: border-box; }

        footer { background: var(--amazon-blue); color: white; text-align: center; padding: 40px; margin-top: 50px; }
    </style>
</head>
<body>

<header>
    <div class="nav-top">
        <div class="logo" onclick="showPage('home')">Chapter<span>&Verse</span></div>
        <div class="search-container">
            <input type="text" id="searchInput" placeholder="Search Chapter & Verse">
            <button onclick="runSearch()"><i class="fa fa-search"></i></button>
        </div>
        <div class="nav-tools">
            <div class="nav-link" id="auth-link" onclick="handleAuthClick()">
                Hello, <span id="user-name">Sign in</span>
                <b id="auth-text">Account & Lists</b>
            </div>
            <div class="nav-link" onclick="showOrders()">
                Returns
                <b>& Orders</b>
            </div>
            <div class="nav-link cart-icon" onclick="showPage('cart')">
                <i class="fa fa-shopping-cart"></i>
                <span id="cart-count">0</span>
            </div>
        </div>
    </div>
</header>

<div id="home" class="page active">
    <h2>Trending Books</h2>
    <div class="book-grid" id="book-display"></div>
</div>

<div id="login" class="page">
    <div class="card-white" style="max-width: 350px; margin: auto;">
        <h2 id="auth-title">Sign-In</h2>
        <label>Email</label>
        <input type="text" id="emailInput">
        <label>Password</label>
        <input type="password" id="passInput">
        <button class="btn-amazon" onclick="loginUser()">Continue</button>
        <p style="font-size: 0.8rem; margin-top: 15px;">By continuing, you agree to Chapter & Verse's Conditions of Use.</p>
        <hr>
        <button style="width: 100%; padding: 5px;" onclick="toggleAuthMode()">Create your Account</button>
    </div>
</div>

<div id="cart" class="page">
    <div style="display: flex; gap: 20px;">
        <div class="card-white" style="flex: 3;">
            <h2>Shopping Cart</h2>
            <hr>
            <div id="cart-items"></div>
        </div>
        <div class="card-white" style="flex: 1; height: fit-content;">
            <h3>Subtotal: <span id="cart-total">$0.00</span></h3>
            <button class="btn-amazon" onclick="goToCheckout()">Proceed to Checkout</button>
        </div>
    </div>
</div>

<div id="checkout" class="page">
    <div class="card-white">
        <h1>Checkout</h1>
        <div class="checkout-step">
            <h2>1. Shipping Address</h2>
            <input type="text" id="ship-name" placeholder="Full Name">
            <input type="text" id="ship-addr" placeholder="Street Address, City, Pincode">
        </div>
        <div class="checkout-step">
            <h2>2. Payment Method</h2>
            <div style="background: #fcf5ee; border: 1px solid #fbd8b4; padding: 15px; margin-top: 10px;">
                <label><input type="radio" name="pay" checked> Credit or Debit Card</label>
                <input type="text" placeholder="Card Number (16 digits)">
                <div style="display: flex; gap: 10px;">
                    <input type="text" placeholder="Expiry MM/YY">
                    <input type="text" placeholder="CVV">
                </div>
            </div>
        </div>
        <div class="checkout-step">
            <h2>3. Review items and shipping</h2>
            <button class="btn-amazon" style="margin-top: 20px; font-size: 1.1rem;" onclick="completeOrder()">Place Your Order</button>
        </div>
    </div>
</div>

<div id="orders" class="page">
    <h1>Your Orders</h1>
    <div id="orders-list"></div>
</div>

<footer>
    <p>© 2026 Chapter & Verse (Amazon Clone Project)</p>
</footer>

<script>
    const books = [
        { id: 1, title: "The Silent Forest", price: 15.99, img: "https://images.unsplash.com/photo-1544947950-fa07a98d237f?w=400" },
        { id: 2, title: "Quantum Echoes", price: 12.50, img: "https://images.unsplash.com/photo-1512820790803-83ca734da794?w=400" },
        { id: 3, title: "Ancient Paths", price: 18.00, img: "https://images.unsplash.com/photo-1543003923-99926422040b?w=400" }
    ];

    let cart = [];
    let orders = JSON.parse(localStorage.getItem('myOrders')) || [];
    let user = localStorage.getItem('userName') || null;

    // INITIALIZE
    window.onload = () => {
        renderBooks();
        updateUI();
    };

    function renderBooks() {
        const display = document.getElementById('book-display');
        display.innerHTML = books.map(b => `
            <div class="book-card">
                <img src="${b.img}">
                <div style="color: #007185; margin: 10px 0; height: 40px;">${b.title}</div>
                <div style="font-weight: bold; margin-bottom: 10px;">$${b.price.toFixed(2)}</div>
                <button class="btn-amazon" onclick="addToCart(${b.id})">Add to Cart</button>
            </div>
        `).join('');
    }

    // AUTH LOGIC
    function updateUI() {
        if(user) {
            document.getElementById('user-name').innerText = user;
            document.getElementById('auth-text').innerText = "Sign Out";
        } else {
            document.getElementById('user-name').innerText = "Sign in";
            document.getElementById('auth-text').innerText = "Account & Lists";
        }
        document.getElementById('cart-count').innerText = cart.length;
    }

    function handleAuthClick() {
        if(user) {
            user = null;
            localStorage.removeItem('userName');
            updateUI();
            showPage('home');
        } else {
            showPage('login');
        }
    }

    function loginUser() {
        const name = document.getElementById('emailInput').value.split('@')[0];
        if(!name) return alert("Enter an email");
        user = name;
        localStorage.setItem('userName', user);
        updateUI();
        showPage('home');
    }

    // CART & CHECKOUT
    function addToCart(id) {
        const book = books.find(b => b.id === id);
        cart.push(book);
        updateUI();
        alert("Added to cart!");
    }

    function showPage(id) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        window.scrollTo(0,0);
        if(id === 'cart') renderCart();
    }

    function renderCart() {
        const container = document.getElementById('cart-items');
        let total = 0;
        container.innerHTML = cart.map((item, idx) => {
            total += item.price;
            return `
                <div style="display:flex; gap:20px; padding: 15px 0; border-bottom:1px solid #ddd">
                    <img src="${item.img}" style="width:80px">
                    <div style="flex:1">
                        <b>${item.title}</b>
                        <div style="color:green; font-size:0.8rem">In Stock</div>
                        <button onclick="cart.splice(${idx},1); renderCart(); updateUI();" style="background:none; border:none; color:#007185; cursor:pointer; padding:0">Delete</button>
                    </div>
                    <b>$${item.price.toFixed(2)}</b>
                </div>
            `;
        }).join('');
        document.getElementById('cart-total').innerText = `$${total.toFixed(2)}`;
    }

    function goToCheckout() {
        if(!user) return showPage('login');
        if(cart.length === 0) return alert("Cart is empty");
        showPage('checkout');
    }

    function completeOrder() {
        const addr = document.getElementById('ship-addr').value;
        if(!addr) return alert("Please enter shipping address");
        
        const newOrder = {
            id: 'ORD-' + Math.floor(Math.random()*1000000),
            date: new Date().toLocaleDateString(),
            items: [...cart],
            total: cart.reduce((s, i) => s + i.price, 0)
        };
        
        orders.unshift(newOrder);
        localStorage.setItem('myOrders', JSON.stringify(orders));
        cart = [];
        updateUI();
        alert("Order Placed Successfully!");
        showOrders();
    }

    function showOrders() {
        if(!user) return showPage('login');
        const list = document.getElementById('orders-list');
        showPage('orders');
        
        if(orders.length === 0) {
            list.innerHTML = "<p>No orders found.</p>";
            return;
        }
        
        list.innerHTML = orders.map(o => `
            <div class="card-white">
                <div style="display:flex; justify-content:space-between; background:#f0f2f2; padding:10px; margin:-20px -20px 20px -20px; border-radius:8px 8px 0 0; font-size:0.8rem">
                    <div>ORDER PLACED: ${o.date}</div>
                    <div>TOTAL: $${o.total.toFixed(2)}</div>
                    <div style="color:#007185">ORDER # ${o.id}</div>
                </div>
                ${o.items.map(i => `<p>• ${i.title}</p>`).join('')}
            </div>
        `).join('');
    }
</script>
</body>
</html>
